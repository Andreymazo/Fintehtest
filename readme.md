Задача
·         Реализовать Django + Stripe API бэкенд со следующим функционалом и условиями:
·         Django Модель Item с полями (name, description, price)
·         API с двумя методами:
·         GET /buy/{id}, c помощью которого можно получить Stripe Session Id для оплаты выбранного Item. При выполнении этого метода c бэкенда с помощью python библиотеки stripe должен выполняться запрос stripe.checkout.Session.create(...) и полученный session.id выдаваться в результате запроса
·         GET /item/{id}, c помощью которого можно получить простейшую HTML страницу, на которой будет информация о выбранном Item и кнопка Buy. По нажатию на кнопку Buy должен происходить запрос на /buy/{id}, получение session_id и далее с помощью JS библиотеки Stripe происходить редирект на Checkout форму stripe.redirectToCheckout(sessionId=session_id)
Доп. Задания: 
·         Запуск используя Docker
·         Использование environment variables
·         Просмотр Django Моделей в Django Admin панели
·         Запуск приложения на удаленном сервере, доступном для тестирования
·         Модель Order, в которой можно объединить несколько Item и сделать платёж в Stripe на содержимое Order c общей стоимостью всех Items
·         Модели Discount, Tax, которые можно прикрепить к модели Order и связать с соответствующими атрибутами при создании платежа в Stripe - в таком случае они корректно отображаются в Stripe Checkout форме.
·         Добавить поле Item.currency, создать 2 Stripe Keypair на две разные валюты и в зависимости от валюты выбранного товара предлагать оплату в соответствующей валюте
·         Реализовать не Stripe Session, а Stripe Payment Intent.
Критерии оценки
Работоспособность
Чистота и структура куда
Гибкость и масштабируемость
Безопасность и обработка ошибок
Доп. плюсы за использование улучшающих архитектуру проекта, его читаемость, расширяемость и тестируемость паттернов и шаблонов проектирования,, использование более удобных библиотек и технологий, позволяющих ускорить разработку и сделать проект лучше.
 Также доп плюсы:
- скрипт или некий функционал для наполнения БД тестовыми данными
- типизация кода, докстринги
- написание readme по всем нюансам и способам запуска

Через джанго формы выбираем. прокидываем данные в пэймент, получаем сессион айди и вставляем его в срип.редирект(не питоновская, а джавоскриптовая функция). Без фетча зашло.
Закомментировал view.py 6 str , forms.py 11-20 докер не запускался. Пока не знаю как запускать докер и работать черерз него с джаного-формой. Пока костыль, можно запустить черерз докер и все, чтобы сработало, нужно раскомментировать и запустить python manage.py runserver.

- Запуск Убунту
Создаем базу, Постгрес уже установлен, вас пускает по команде (если нет, то смотрим интеренет как поменять в конфигурации peer --> trust)
Заходим
##
        psql -U postgres
Делаем пароль 123456
##
        psql -U postgres ALTER ROLE postgres WITH PASSWORD '123456';
Создаем базу и к ней присоединяемся
##
        create database fintehtest; \c fintehtest
Зависимости
##
        pip install -r requirements.txt
Миграции
##
        python manage.py makemjigrations
##
        python manage.py migrate
##
        python manage.py runserver

- Раскомментировали view.py 6 str , forms.py 11-20

- на выпадающей странице выбираете лодку и оплачиваете, как на видосе.
- внизу команды постоянно пригождающиеся

[Screencast from 31.08.2024 12:51:14.webm](https://github.com/user-attachments/assets/37991401-da11-49cd-b03f-829fa595e74b)

# Очистка от всех контейнеров, имиджей и вольюмов:
# docker stop $(docker ps -a -q)
# docker-compose down --volumes
# docker volume prune
# docker rm $(docker ps -a -q)
# docker rmi $(docker images -a -q)
# docker rmi -f $(docker images -aq)
# docker volume rm $(docker volume ls -q --filter dangling=true)

# Проверка (должны быть пустые строки)
# docker images -a
# docker ps -a
# docker volume ls

# fuser -n tcp -k 8000
